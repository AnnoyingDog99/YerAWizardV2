@{
    string connectionString = @"Data Source=(LocalDB)\MSSQLLocalDB;AttachDbFilename=|DataDirectory|\Harry_Potter.mdf;Integrated Security=True";

    string provider = "System.Data.SqlClient";
    Database db = Database.OpenConnectionString(connectionString, provider);
    string mail = "";
    string GetquestionId;
    string Getquestion;
    string Getexamid;
    string question;
    int exam_id = 2;
    int amountofquestion;
    int totalpoints = 0;
    int questionId;
    int Exam_Id;
    int counter = 0;
    int lesson_Id = 3;



    string getamountofquestions = "SELECT COUNT(question) FROM Questions WHERE exam_Id = @0";
    amountofquestion = db.QueryValue(getamountofquestions, exam_id);

    if (Session["counter"] != null)
    {
        counter = Convert.ToInt32(Session["counter"]);

    }
    if (Session["totalpoints"] != null)
    {
        totalpoints = Convert.ToInt32(Session["totalpoints"]);
    }
    if(Session["mail"] !=null)
    {
        mail = Convert.ToString(Session["mail"]);
    }
    if (IsPost)
    {

        int answer_Id = Request.Form["Q1"].AsInt();
        string checkifcorrect = "SELECT corret From answer where answer_Id = @0";
        var iscorrect = db.QueryValue(checkifcorrect, answer_Id);
        if (iscorrect == true)
        {
            Getexamid = "SELECT exam_Id from exam where Lesson_Id = @0";
            Exam_Id = db.QueryValue(Getexamid, lesson_Id);
            GetquestionId = "SELECT Question_Id from Questions where exam_Id = @0 AND Order_Prio = @1";
            questionId = db.QueryValue(GetquestionId, Exam_Id, counter);
            string getpoints = "SELECT points FROM Questions where Question_Id = @0";
            int pointforquestion = db.QueryValue(getpoints, questionId);
            totalpoints = totalpoints+pointforquestion;
        }
        if ( counter == amountofquestion)
        {
            //tel punten op en sluit de quiz
            //getcurrent user
            //insertpoints into profile where current username = @0
            //get his house id form current user
            // get current points from house 
            // current points + gaint points
            //update points from house where house_id = @0;
            // ga terug naar de les pagina


        }
        else
        {
            counter++;

        }

    }
    if(counter == 0)
    {
        counter++;
    }
    string selectexam = "SELECT exam_name From Exam WHERE Lesson_Id = @0";
    string GetExam = db.QueryValue(selectexam, lesson_Id);

    Getexamid = "SELECT exam_Id from exam where Lesson_Id = @0";
    Exam_Id = db.QueryValue(Getexamid, lesson_Id);
    Getquestion = "SELECT Question from Questions where exam_Id = @0 AND Order_Prio = @1";
    GetquestionId = "SELECT Question_Id from Questions where exam_Id = @0 AND Order_Prio = @1";
    question = db.QueryValue(Getquestion, Exam_Id, counter);
    questionId = db.QueryValue(GetquestionId, Exam_Id, counter);


    string getanotherawnser = "SELECT answer , answer_Id FROM answer WHERE  Question_Id = @0";
    var answers = db.Query(getanotherawnser, questionId);


    Session["counter"] = counter;
    Session["totalpoints"] = totalpoints;
    Session["mail"] = mail;
}

<h1>@question</h1>
<form method="post" action="~/exam page.cshtml">
    @foreach (var answer in answers)
    {

        <input type="radio" name="Q1" value="@answer.answer_Id" />@answer.answer<br />
        <br />
        @totalpoints;
    }
    <input type="submit" value="Question 2" />
</form>
